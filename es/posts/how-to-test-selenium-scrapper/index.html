<!DOCTYPE html>
<html prefix="
        og: http://ogp.me/ns# article: http://ogp.me/ns/article#
    " vocab="http://ogp.me/ns" lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>How to test Selenium scrapper with Python | Willy's blog</title>
<link href="../../../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/rst_base.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/index.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<style>
        .highlight pre, .code pre {
            white-space: pre;
        }
        </style>
<style>
        kbd {
            font-family: Consolas, "Lucida Console", monospace;
            display: inline-block;
            border-radius: 3px;
            padding: 0px 4px;
            box-shadow: 1px 1px 1px #777;
            margin: 2px;
            font-size: small;
            vertical-align: text-bottom;
            background: #eee;
            font-weight: 500;
            color: #555;
            cursor: pointer;
            font-variant: small-caps;
            font-weight: 600;

            /* This two work */
            /* letter-spacing: 0.5px; */
            letter-spacing: 1px;


            /* Prevent selection */
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        </style>
<script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script><link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS (es)" hreflang="es" href="../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" hreflang="en" href="../../../rss.xml">
<link rel="canonical" href="https://woile.dev/es/posts/how-to-test-selenium-scrapper/">
<!--[if lt IE 9]><script src="../../../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><script src="https://cdn.counter.dev/script.js" data-id="acc7e853-fadb-4b91-a2f2-801890951f1e" data-utcoffset="1"></script><meta name="author" content="Woile">
<link rel="prev" href="../guide-to-sublime-like-a-normal-person/" title="Guide to Sublime like a normal person" type="text/html">
<link rel="next" href="../decrypt-filesystem/" title="Decrypt filesystem" type="text/html">
<meta property="og:site_name" content="Willy's blog">
<meta property="og:title" content="How to test Selenium scrapper with Python">
<meta property="og:url" content="https://woile.dev/es/posts/how-to-test-selenium-scrapper/">
<meta property="og:description" content="This week I've been writing tests for a project which is
using Selenium as a scrapper.
As you may know, Selenium is a testing framework, it's intended to be used while writing tests,
not as a web craw">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-09-12T11:38:40-03:00">
<meta property="article:tag" content="selenium python testing">
<link rel="alternate" hreflang="en" href="../../../posts/how-to-test-selenium-scrapper/">
<link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
</head>
<body>
    <input id="dark-mode" type="checkbox"><div class="theme">
        
    <header class="cover"><input id="cool-menu" type="checkbox"><label for="cool-menu" class="cool-menu__label">
        <svg class="cool-menu hover:cool-menu checked:cool-menu" viewbox="0 0 100 100" width="40" height="40" aria-hidden="true"><circle cx="50" cy="50" r="50" fill-opacity="0.5"></circle></svg></label>
    <nav class="menu"><ul>
<li><a class="hover:menu__link" href="../../">üè† Inicio</a></li>
                <li><a class="hover:menu__link" href="../../../blog/">üì∞ Blog</a></li>
                <li><a class="hover:menu__link" href="../../mentoring/">üìó Mentoreo</a></li>
                <li><a class="hover:menu__link" href="../../archive.html">üóÑÔ∏è Archivo</a></li>
                <li><a class="hover:menu__link" href="../../categories/index.html">üè∑Ô∏è Tags</a></li>
                <li><a class="hover:menu__link" href="../../../rss.xml">üõ∞Ô∏è RSS feed</a></li>

        
        
        
        </ul>
<ul>
<li>
                        <span id="toptranslations">
                        <a href="../../../" class="hover:menu__link" rel="alternate" hreflang="en">English</a>

        </span>

            </li>
            <li>
                <label class="dark-mode-label hover:dark-mode-label" for="dark-mode">
                    <?xml version="1.0" encoding="UTF-8" standalone="no"?><!-- Generator: Gravit.io --><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="isolation: isolate;" viewbox="0 0 416 416" width="30px" height="30px"><defs><clippath id="_clipPath_qEPwrMg7OPn6mDBNPkG6Nqc7qffgU4IC"><rect width="416" height="416"></rect></clippath></defs><g clip-path="url(#_clipPath_qEPwrMg7OPn6mDBNPkG6Nqc7qffgU4IC)"><path d=" M 304 88 C 304 57.38 299.49 26.39 288 0 C 364.43 33.27 416 111.32 416 200 C 416 319.29 319.29 416 200 416 C 111.32 416 33.27 364.43 0 288 C 26.39 299.49 57.38 304 88 304 C 207.29 304 304 207.29 304 88 Z "></path></g></svg></label>
            </li>
        </ul></nav><h3 id="brand"><a href="../../" title="Willy's blog" rel="home">
            <span id="blog-title">Willy's blog</span>
        </a></h3>

    <div>

    </div>

    </header><div class="layout">
            <main id="content" class="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h2 class="p-name entry-title header__title" itemprop="headline name"><a href="." class="u-url hover:header__title__link">How to test Selenium scrapper with Python</a></h2>

        <div class="metadata" style="margin-bottom: 3rem;">
            <span class="byline author vcard p-author h-card" style="display: flex;column-gap: 1rem; flex-wrap: wrap;">
                <span class="byline-name fn p-name" itemprop="author">
                        Woile
                </span>
                <span class="dateline">
                    <a class="article__meta__link hover:article__meta__link" href="." rel="bookmark">
                    <time class="published dt-published" datetime="2017-09-12T11:38:40-03:00" itemprop="datePublished" title="2017-09-12 11:38">2017-09-12 11:38</time></a>
                </span>
                        <span class="sourceline"><a class="article__meta__link hover:article__meta__link" href="index.rst">C√≥digo fuente</a></span>

            </span>
            <br><span style="display: flex;column-gap: 1rem; flex-wrap: wrap;">
                <a class="tag p-category article__meta__link hover:article__meta__link" href="../../categories/selenium-python-testing/" rel="tag">#selenium python testing</a>
            </span>

                <span class="commentline">

        </span>
</div>
        
    </header><section class="e-content entry-content" itemprop="articleBody text"><p>This week I've been writing tests for <a class="reference external" href="https://github.com/discov-r/pyinstamation">a project</a> which is
using Selenium as a scrapper.</p>
<p>As you may know, Selenium is a testing framework, it's intended to be used while writing tests,
not as a web crawler/scrapper.</p>
<p>But you can. Why? Because it runs a browser, and the browser is the real sh*t, so the Javascript
gets executed, and we are happy. There are other solutions like <a class="reference external" href="https://github.com/makinacorpus/spynner">Spynner</a>
or writing the scrapper in pure Javascript, but I felt comfortable using Selenium this way.</p>
<section id="the-problem"><h2>The problem</h2>
<p>How do we <strong>test</strong> this scrapper? I want it to have tests, damn!</p>
</section><section id="solution"><h2>Solution</h2>
<p>Save the static content while running the scrapper, then, serve it with a very small http server
while testing. Yes, it's a bit tedious, but it delivers.</p>
<!-- TEASER_END -->
<p>When should you save?</p>
<p>Whenever you need to. This is a good example:</p>
<div class="code"><pre class="code python"><a id="rest_code_e23e38ac6aa5495f951423b5282a627f-1" name="rest_code_e23e38ac6aa5495f951423b5282a627f-1" href="#rest_code_e23e38ac6aa5495f951423b5282a627f-1"></a><span class="n">url</span> <span class="o">=</span> <span class="s1">'https://betterexplained.com/articles/why-do-we-multiply-combinations/'</span>
<a id="rest_code_e23e38ac6aa5495f951423b5282a627f-2" name="rest_code_e23e38ac6aa5495f951423b5282a627f-2" href="#rest_code_e23e38ac6aa5495f951423b5282a627f-2"></a><span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">()</span>
<a id="rest_code_e23e38ac6aa5495f951423b5282a627f-3" name="rest_code_e23e38ac6aa5495f951423b5282a627f-3" href="#rest_code_e23e38ac6aa5495f951423b5282a627f-3"></a><span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<a id="rest_code_e23e38ac6aa5495f951423b5282a627f-4" name="rest_code_e23e38ac6aa5495f951423b5282a627f-4" href="#rest_code_e23e38ac6aa5495f951423b5282a627f-4"></a><span class="n">save_current_state</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">current_url</span><span class="p">,</span> <span class="n">driver</span><span class="o">.</span><span class="n">page_source</span><span class="p">)</span>
</pre></div>
<p>Can I see the code of <code>save_current_state</code>? Here you go:</p>
<div class="code"><pre class="code python"><a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-1" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-1" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-1"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-2" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-2" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-2"></a><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">quote</span>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-3" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-3" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-3"></a>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-4" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-4" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-4"></a><span class="n">SAVE_SOURCE</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># disable in production</span>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-5" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-5" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-5"></a><span class="n">TEST_LOCATION</span> <span class="o">=</span> <span class="s1">'tests/static'</span>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-6" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-6" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-6"></a>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-7" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-7" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-7"></a>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-8" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-8" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-8"></a><span class="k">def</span> <span class="nf">save_current_state</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-9" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-9" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-9"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">SAVE_SOURCE</span><span class="p">:</span>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-10" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-10" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-10"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-11" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-11" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-11"></a>    <span class="k">if</span> <span class="n">location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-12" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-12" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-12"></a>        <span class="n">location</span> <span class="o">=</span> <span class="n">TEST_LOCATION</span>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-13" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-13" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-13"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-14" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-14" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-14"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'source must be a string'</span><span class="p">)</span>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-15" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-15" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-15"></a>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-16" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-16" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-16"></a>    <span class="n">filename</span> <span class="o">=</span> <span class="n">quote</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">'/'</span><span class="p">,</span> <span class="n">safe</span><span class="o">=</span><span class="s1">''</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'.html'</span>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-17" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-17" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-17"></a>    <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-18" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-18" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-18"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-19" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-19" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-19"></a>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-20" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-20" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-20"></a>
<a id="rest_code_8af887f510e743f1bdfa3ee10cf20879-21" name="rest_code_8af887f510e743f1bdfa3ee10cf20879-21" href="#rest_code_8af887f510e743f1bdfa3ee10cf20879-21"></a>    <span class="k">return</span> <span class="n">filepath</span>
</pre></div>
<p>Notice how the url is used as the file name (safely parsed). This helps a lot to match urls.
But of course, a case where something custom is required may happen, so you can tune the server to
fit any case.</p>
<p>And the python server? A minor modification from <a class="reference external" href="https://realpython.com/blog/python/testing-third-party-apis-with-mock-servers/">here</a></p>
<div class="code"><pre class="code python"><a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-1" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-1" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-1"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-2" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-2" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-2"></a><span class="kn">import</span> <span class="nn">socket</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-3" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-3" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-3"></a><span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-4" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-4" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-4"></a><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">quote</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-5" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-5" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-5"></a><span class="kn">from</span> <span class="nn">http.server</span> <span class="kn">import</span> <span class="n">BaseHTTPRequestHandler</span><span class="p">,</span> <span class="n">HTTPServer</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-6" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-6" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-6"></a>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-7" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-7" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-7"></a>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-8" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-8" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-8"></a><span class="n">TEST_LOCATION</span> <span class="o">=</span> <span class="s1">'tests/static'</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-9" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-9" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-9"></a>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-10" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-10" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-10"></a>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-11" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-11" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-11"></a><span class="k">class</span> <span class="nc">MockServerRequestHandler</span><span class="p">(</span><span class="n">BaseHTTPRequestHandler</span><span class="p">):</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-12" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-12" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-12"></a>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-13" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-13" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-13"></a>    <span class="k">def</span> <span class="nf">_set_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-14" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-14" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-14"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-15" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-15" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-15"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_header</span><span class="p">(</span><span class="s1">'Set-Cookie'</span><span class="p">,</span> <span class="s1">'exampleid=c295IGVsIHVzdWFyaW8gZW5pdG8K'</span><span class="p">)</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-16" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-16" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-16"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_header</span><span class="p">(</span><span class="s1">'Content-type'</span><span class="p">,</span> <span class="s1">'text/html'</span><span class="p">)</span>  <span class="c1"># change at will</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-17" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-17" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-17"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">end_headers</span><span class="p">()</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-18" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-18" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-18"></a>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-19" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-19" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-19"></a>    <span class="nd">@property</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-20" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-20" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-20"></a>    <span class="k">def</span> <span class="nf">_filepath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-21" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-21" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-21"></a>        <span class="n">filename</span> <span class="o">=</span> <span class="n">quote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">'/'</span><span class="p">),</span> <span class="n">safe</span><span class="o">=</span><span class="s1">''</span><span class="p">)</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-22" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-22" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-22"></a>        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">TEST_LOCATION</span><span class="p">,</span> <span class="s1">'</span><span class="si">{0}</span><span class="s1">.html'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-23" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-23" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-23"></a>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-24" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-24" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-24"></a>    <span class="k">def</span> <span class="nf">_read_from_file_or_404</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-25" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-25" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-25"></a>        <span class="k">try</span><span class="p">:</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-26" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-26" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-26"></a>            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filepath</span><span class="p">,</span> <span class="s1">'rb'</span><span class="p">)</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-27" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-27" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-27"></a>        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-28" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-28" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-28"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-29" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-29" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-29"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">wfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">'</span><span class="se">\n</span><span class="s1">&lt;html&gt;&lt;body&gt;404 Not Found!&lt;/body&gt;&lt;/html&gt;'</span><span class="p">)</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-30" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-30" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-30"></a>        <span class="k">else</span><span class="p">:</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-31" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-31" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-31"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-32" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-32" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-32"></a>            <span class="c1"># needs an extra new line</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-33" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-33" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-33"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">wfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span> <span class="o">+</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-34" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-34" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-34"></a>            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-35" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-35" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-35"></a>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-36" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-36" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-36"></a>    <span class="k">def</span> <span class="nf">do_GET</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-37" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-37" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-37"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_set_headers</span><span class="p">()</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-38" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-38" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-38"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_read_from_file_or_404</span><span class="p">()</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-39" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-39" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-39"></a>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-40" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-40" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-40"></a>    <span class="k">def</span> <span class="nf">do_POST</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-41" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-41" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-41"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_set_headers</span><span class="p">()</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-42" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-42" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-42"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_read_from_file_or_404</span><span class="p">()</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-43" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-43" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-43"></a>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-44" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-44" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-44"></a>    <span class="k">def</span> <span class="nf">log_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-45" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-45" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-45"></a>        <span class="sd">"""Do not write log messages to std. Disable to see the requests."""</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-46" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-46" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-46"></a>        <span class="k">return</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-47" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-47" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-47"></a>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-48" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-48" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-48"></a>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-49" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-49" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-49"></a><span class="k">def</span> <span class="nf">get_free_port</span><span class="p">(</span><span class="n">hostname</span><span class="p">):</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-50" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-50" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-50"></a>    <span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-51" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-51" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-51"></a>    <span class="n">s</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="n">hostname</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-52" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-52" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-52"></a>    <span class="n">address</span><span class="p">,</span> <span class="n">port</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">getsockname</span><span class="p">()</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-53" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-53" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-53"></a>    <span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-54" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-54" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-54"></a>    <span class="k">return</span> <span class="n">port</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-55" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-55" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-55"></a>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-56" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-56" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-56"></a>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-57" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-57" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-57"></a><span class="k">def</span> <span class="nf">start_mock_server</span><span class="p">(</span><span class="n">hostname</span><span class="o">=</span><span class="s1">'localhost'</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-58" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-58" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-58"></a>    <span class="k">if</span> <span class="n">port</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-59" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-59" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-59"></a>        <span class="n">port</span> <span class="o">=</span> <span class="n">get_free_port</span><span class="p">(</span><span class="n">hostname</span><span class="p">)</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-60" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-60" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-60"></a>    <span class="n">mock_server</span> <span class="o">=</span> <span class="n">HTTPServer</span><span class="p">((</span><span class="n">hostname</span><span class="p">,</span> <span class="n">port</span><span class="p">),</span> <span class="n">MockServerRequestHandler</span><span class="p">)</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-61" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-61" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-61"></a>    <span class="n">mock_server_thread</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">mock_server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">)</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-62" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-62" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-62"></a>    <span class="n">mock_server_thread</span><span class="o">.</span><span class="n">setDaemon</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-63" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-63" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-63"></a>    <span class="n">mock_server_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<a id="rest_code_487b2ac939ed470eb5a53cb9921b8203-64" name="rest_code_487b2ac939ed470eb5a53cb9921b8203-64" href="#rest_code_487b2ac939ed470eb5a53cb9921b8203-64"></a>    <span class="k">return</span> <span class="s1">'</span><span class="si">{hostname}</span><span class="s1">:</span><span class="si">{port}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">hostname</span><span class="o">=</span><span class="n">hostname</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">)</span>
</pre></div>
<p>And finally the base test from which you will inherit, whenever you need to test the scrapper.</p>
<div class="code"><pre class="code python"><a id="rest_code_859a4c72b2d7477ca9c47cff163b7a90-1" name="rest_code_859a4c72b2d7477ca9c47cff163b7a90-1" href="#rest_code_859a4c72b2d7477ca9c47cff163b7a90-1"></a><span class="kn">import</span> <span class="nn">unittest</span>
<a id="rest_code_859a4c72b2d7477ca9c47cff163b7a90-2" name="rest_code_859a4c72b2d7477ca9c47cff163b7a90-2" href="#rest_code_859a4c72b2d7477ca9c47cff163b7a90-2"></a><span class="kn">from</span> <span class="nn">my_project</span> <span class="kn">import</span> <span class="n">const</span>
<a id="rest_code_859a4c72b2d7477ca9c47cff163b7a90-3" name="rest_code_859a4c72b2d7477ca9c47cff163b7a90-3" href="#rest_code_859a4c72b2d7477ca9c47cff163b7a90-3"></a><span class="kn">from</span> <span class="nn">tests</span> <span class="kn">import</span> <span class="n">start_mock_server</span>  <span class="c1"># or where you saved it</span>
<a id="rest_code_859a4c72b2d7477ca9c47cff163b7a90-4" name="rest_code_859a4c72b2d7477ca9c47cff163b7a90-4" href="#rest_code_859a4c72b2d7477ca9c47cff163b7a90-4"></a>
<a id="rest_code_859a4c72b2d7477ca9c47cff163b7a90-5" name="rest_code_859a4c72b2d7477ca9c47cff163b7a90-5" href="#rest_code_859a4c72b2d7477ca9c47cff163b7a90-5"></a>
<a id="rest_code_859a4c72b2d7477ca9c47cff163b7a90-6" name="rest_code_859a4c72b2d7477ca9c47cff163b7a90-6" href="#rest_code_859a4c72b2d7477ca9c47cff163b7a90-6"></a><span class="k">class</span> <span class="nc">BaseScrapperTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<a id="rest_code_859a4c72b2d7477ca9c47cff163b7a90-7" name="rest_code_859a4c72b2d7477ca9c47cff163b7a90-7" href="#rest_code_859a4c72b2d7477ca9c47cff163b7a90-7"></a>
<a id="rest_code_859a4c72b2d7477ca9c47cff163b7a90-8" name="rest_code_859a4c72b2d7477ca9c47cff163b7a90-8" href="#rest_code_859a4c72b2d7477ca9c47cff163b7a90-8"></a>    <span class="nd">@classmethod</span>
<a id="rest_code_859a4c72b2d7477ca9c47cff163b7a90-9" name="rest_code_859a4c72b2d7477ca9c47cff163b7a90-9" href="#rest_code_859a4c72b2d7477ca9c47cff163b7a90-9"></a>    <span class="k">def</span> <span class="nf">setUpClass</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<a id="rest_code_859a4c72b2d7477ca9c47cff163b7a90-10" name="rest_code_859a4c72b2d7477ca9c47cff163b7a90-10" href="#rest_code_859a4c72b2d7477ca9c47cff163b7a90-10"></a>        <span class="n">url</span> <span class="o">=</span> <span class="n">start_mock_server</span><span class="p">()</span>
<a id="rest_code_859a4c72b2d7477ca9c47cff163b7a90-11" name="rest_code_859a4c72b2d7477ca9c47cff163b7a90-11" href="#rest_code_859a4c72b2d7477ca9c47cff163b7a90-11"></a>        <span class="n">const</span><span class="o">.</span><span class="n">HOSTNAME</span> <span class="o">=</span> <span class="n">url</span>
</pre></div>
<p>Take a look at that last line, your project must have a central point where the <strong>HOSTNAME</strong> is set.
Before testing, you need to tell to your application to hit your localserver.</p>
</section><section id="final-notes"><h2>Final notes</h2>
<p>If you find hard to test some scrapper function, try dividing it into smaller functions, and testing
them individually.</p>
<p>If a scrapper function does not include any condition, it's okay to <code>return True</code> at the end,
and assert that boolean. If something goes wrong in the scrapper, we'll get noticied with an exception
and the test will throw an error. Also, if you wanted to <a class="reference external" href="https://stackoverflow.com/a/4319870/2047185">receive a fail</a>
instead of an error, which is more pythonic, you should do something like this in your test:</p>
<div class="code"><pre class="code python"><a id="rest_code_4ba5cf03a6874b1e8e385cb7e497f5b1-1" name="rest_code_4ba5cf03a6874b1e8e385cb7e497f5b1-1" href="#rest_code_4ba5cf03a6874b1e8e385cb7e497f5b1-1"></a><span class="k">try</span><span class="p">:</span>
<a id="rest_code_4ba5cf03a6874b1e8e385cb7e497f5b1-2" name="rest_code_4ba5cf03a6874b1e8e385cb7e497f5b1-2" href="#rest_code_4ba5cf03a6874b1e8e385cb7e497f5b1-2"></a>    <span class="n">users_from_github</span><span class="p">()</span>
<a id="rest_code_4ba5cf03a6874b1e8e385cb7e497f5b1-3" name="rest_code_4ba5cf03a6874b1e8e385cb7e497f5b1-3" href="#rest_code_4ba5cf03a6874b1e8e385cb7e497f5b1-3"></a><span class="k">except</span> <span class="n">ExceptionType</span><span class="p">:</span>
<a id="rest_code_4ba5cf03a6874b1e8e385cb7e497f5b1-4" name="rest_code_4ba5cf03a6874b1e8e385cb7e497f5b1-4" href="#rest_code_4ba5cf03a6874b1e8e385cb7e497f5b1-4"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">"users_from_github() raised ExceptionType unexpectedly!"</span><span class="p">)</span>
</pre></div>
<p>Try isolating the scrapper as much as possible from the rest of your project, whenever you need
to use selenium, avoid including bussiness logic in it as well, this difficults testing and makes
the code quite confusing.</p>
<p>Regards!</p>
</section></section><aside class="postpromonav"><nav><ul itemprop="keywords" class="tags article__meta">
<li>
            <a class="tag p-category article__meta__link hover:article__meta__link" href="../../categories/selenium-python-testing/" rel="tag">#selenium python testing</a>
          </li>
        </ul>
<ul class="pager hidden-print pagination">
<li class="next">
                <a class="hover:pagination__link" href="../decrypt-filesystem/" rel="next" title="Decrypt filesystem">Siguiente publicaci√≥n</a>
            </li>
            <li class="previous">
                <a class="hover:pagination__link" href="../guide-to-sublime-like-a-normal-person/" rel="prev" title="Guide to Sublime like a normal person">Publicaci√≥n anterior</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script><div id="comment-section"></div>
<script>
initComments({
  node: document.getElementById("comment-section"),
  defaultHomeserverUrl: "https://matrix.cactus.chat:8448",
  serverName: "cactus.chat",
  siteName: "woile.dev",
  commentSectionId: "how.to.test.selenium.scrapper.with.python"
})
</script></section></article></main>
</div>
    </div>
                <script src="../../../assets/js/index.js"></script><script src="../../../assets/js/mermaid.min.js"></script><script src="../../../assets/js/baguetteBox.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
